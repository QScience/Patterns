<?xml version="1.0" encoding="ISO-8859-1"?>
<pattern>
  <info>
    <title>Projects</title>
    <description>This pattern sets up functionality for projects with a project content type and view.</description>
    <author>Chris Bryant</author>
    <author_email>chris@graviteklabs.com></author_email>
    <version>0.1</version>
    <author_date>09.11.2008</author_date>
    <category>Package: Project Management Demo</category>
    <compatibility>5x</compatibility>      
  </info>
  
  <!-- Enable required modules. -->
  <modules>
    <module>content</module>
    <module>taxonomy</module>
    <module>views</module>
    <module>nodereference</module>
    <module>menu</module>
  </modules>

  <actions>
	  <!-- List of other required patterns to enable -->
	  
    <pattern>additional_modules</pattern>
    <pattern>companies</pattern>
    <pattern>contacts</pattern>
    
    
    <!-- Setup Content Types -->
    
    <!-- Create projects content type -->
    <content>
      <name>Project</name>
      <type>project</type>
      <description>Project content type</description>
      <status>status</status>
      <promote>false</promote>
      <comment>0</comment>
      <upload>1</upload>
    </content>
    <!-- Create field groups -->
    <group>
	    <type>project</type>
	    <name>project_details</name>
	    <label>Project Details</label>
	    <form>
		    <style>fieldset_collapsible</style>
		    <description>Basic project details</description>
	    </form>
    </group>
    <group>
	    <type>project</type>
	    <name>project_schedule</name>
	    <label>Schedule</label>
	    <form>
		    <style>fieldset_collapsible</style>
		    <description>Basic project details</description>
	    </form>
    </group>
    
    <!-- Setup fields -->
    <field>
	    <type>project</type>
	    <name>company</name>
	    <label>Company</label>
	    <widget>nodereference_select</widget>
	    <option>nodereference</option>
	    <!-- <group>project_details</group> -->
	    <required>true</required>
	    <multiple>true</multiple>
	    <referenceable_types>
		    <company />  <!-- This is name of the content type -->
	    </referenceable_types>
	    <weight>-9</weight>
    </field>
    <field>
	    <type>project</type>
	    <name>website</name>
	    <label>Website</label>
	    <widget>text</widget>
	    <option>text</option>
	    <rows>1</rows>
	    <text_processing>0</text_processing>
	    <required>1</required>
	    <weight>-8</weight>
	    <!-- <group>project_details</group> -->
    </field>
    <field>
	    <type>project</type>
	    <name>project_lead</name>
	    <label>Project Lead</label>
	    <widget>nodereference_select</widget>
	    <option>nodereference</option>
	    <!-- <group>project_details</group> -->
	    <required>false</required>
	    <multiple>false</multiple>
	    <referenceable_types>
		    <contact />  <!-- This is name of the content type -->
	    </referenceable_types>
	    <weight>-7</weight>
    </field>
    <field>
	    <type>project</type>
	    <name>project_team</name>
	    <label>Project Team</label>
	    <widget>nodereference_select</widget>
	    <option>nodereference</option>
	    <!-- <group>project_details</group> -->
	    <required>false</required>
	    <multiple>true</multiple>
	    <referenceable_types>
		    <contact />  <!-- This is name of the content type -->
	    </referenceable_types>
	    <weight>-6</weight>
    </field>
    <field>
	    <type>project</type>
	    <name>budget</name>
	    <label>Budget</label>
	    <widget>number</widget>
	    <option>number_integer</option>
	    <!-- <group>project_details</group> -->
	    <weight>-5</weight>
    </field>
    <!-- Setup date field type -->
    <field>
	    <type>project</type>
	    <name>start_date</name>
	    <label>Start Date</label>
	    <widget>date_select</widget>
	    <option>date</option>
	    <granularity><Y>Y</Y><M>M</M><D>D</D></granularity>
	    <tz_handling>none</tz_handling>
	    <!-- <group>project_schedule</group> -->
	    <weight>-4</weight>
    </field>
    <field>
	    <type>project</type>
	    <name>due_date</name>
	    <label>Due Date</label>
	    <widget>date_select</widget>
	    <option>date</option>
	    <granularity><Y>Y</Y><M>M</M><D>D</D></granularity>
	    <tz_handling>none</tz_handling>
	    <weight>-3</weight>
	    <!-- <group>project_schedule</group> -->
    </field>

    
    <!-- Setup Taxonomy -->
    
    <vocabulary>
	    <name>Skills</name>
	    <hierarchy>0</hierarchy> <!-- No Hierarchy -->
	    <multiple>1</multiple>
	    <nodes>
		    <project /> <!-- Put the name of the content type -->
	    </nodes>
    </vocabulary>
    <vocabulary>
	    <name>Project Status</name>
	    <multiple>0</multiple>
	    <hierarchy>0</hierarchy> <!-- No Hierarchy -->
	    <nodes>
		    <project /> <!-- Put the name of the content type -->
	    </nodes>
    </vocabulary>
    <!-- Taxonomy terms -->
    <term vocabulary="Project Status">Prospect</term>
    <term vocabulary="Project Status">Confirmed</term>
    <term vocabulary="Project Status">In Progress</term>
    <term vocabulary="Project Status">Completed</term>
    <term vocabulary="Project Status">Canceled</term>
    
    <menu>
	    <parent>Primary Links</parent>
	    <title>Projects</title>
	    <path>projects</path>
	    <weight>-5</weight>
    </menu>
    
                    <!-- Setup companies view -->
    <view>
      <name>projects</name>
      <description>Listing of projects</description>
      <page>
        <enabled>1</enabled>
        <title>Projects</title>
        <type>teaser</type>
        <numnodes>25</numnodes>
        <pager>true</pager>
        <empty>There are currently no projects.</empty>
      </page>
      <url>projects</url>
      <block>
        <enabled>1</enabled>
        <title>Projects</title>
        <type>list</type>
        <numnodes>4</numnodes>
        <more>true</more>
      </block>
      <field>
	      <id>node.title</id>
      </field>
      <filter>
        <type>node.type</type>
        <operator>OR</operator>
        <value>
          <type>project</type> <!-- The name of the your content type goes here. -->
        </value>
      </filter>
      <filter>
        <type>node.status</type>
        <operator>=</operator>
        <value>1</value>
      </filter>
      <sort>
        <type>node.created</type>
        <value>descending</value>
      </sort>
    </view>

    <!-- Setup Blocks -->
    
    <block id="views-projects">
	    <theme>sky</theme>
	    <status>1</status>
	    <weight>-7</weight>
	    <region>left</region>
    </block>

  </actions>
</pattern>
